<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Message Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }

        .container h1 {
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }

        .container label {
            font-weight: bold;
            display: block;
            margin-top: 10px;
        }

        .container input[type="text"],
        .container textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .container button {
            width: 100%;
            padding: 10px;
            background-color: #25D366;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }

        .container button:hover {
            background-color: #1DA851;
        }
    </style>
    <link rel="stylesheet" href="../css/checkout.css">
</head>

<body>
    <div class="fill" style=" font-size: 14px;">
        <div class="Alamat-checkout">
            <h4 style="color: black; margin-left: 20px; margin-bottom: 10px;">Alamat Pengantaran</h4>
            <a href="account.html">
                <div style="display: flex; justify-content: center;">
                    <div class="box-alamat-checkout" id="id-alamat-lengkap-input"> (+) Tambah alamat</div>
                </div>
            </a>
        </div>
    
        <div class="hari-jam">
            <div class="hari-antar" style="width: 130px;">
                <h4 style="color: black;"> Hari antar</h4>
                <select  id="id-hari-antar-input" class="my-input-class">
                    <option value="Senin">Senin</option>
                    <option value="Selasa">Selasa</option>
                    <option value="Rabu">Rabu</option>
                    <option value="Kamis">Kamis</option>
                    <option value="Jumat">Jumat</option>
                    <option value="Sabtu">Sabtu</option>
                    <option value="Minggu">Minggu</option>
                </select>
            </div>
            <div style="display: flex; justify-content: center; align-items: center;">
                <div class="jam-antar">
                    <h4 style="color: #F4F4F4; margin-top: 30px;">Jam</h4>
                    <div style="position: relative;">
                        <button id="time-button">07:00</button>
                        <div id="time-dropdown"></div>
                    </div>
    
                    <!-- Selected Time -->
                    <div>
                        <span id="selected-time"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="catatan-tambahan">
            <h4 style="color: black; margin-left: 20px; margin-bottom: 10px;">Catatan Tambahan</h4>
            <div style="display: flex; justify-content: center;">
                <textarea class="box-catatan-tambahan" id="id-catatan-input"></textarea>
            </div>
        </div>
    </div>
    <nav class="cs-bottom-page">
        <a class="cs-total-harga">
            <p> Total pembayaran</p>
            <p id="total-payment" style="color: var(--1);"> Rp. 0</p>
        </a>
        <button id="show-section-confirm-btn" class="into-whatsapp">
            Buat Pesanan
        </button>
    </nav>


    <div class="container">
        <h1>WhatsApp Message Generator</h1>
        <label for="address">Alamat:</label>
        <input type="text" id="address" placeholder="Masukkan alamat">

        <label for="day">Hari:</label>
        <input type="text" id="day" placeholder="Masukkan hari">

        <label for="time">Jam:</label>
        <input type="text" id="time" placeholder="Masukkan jam">

        <label for="notes">Catatan Tambahan:</label>
        <textarea id="notes" rows="3" placeholder="Masukkan catatan tambahan"></textarea>

        <label for="orderDetails">Rincian Pesanan:</label>
        <textarea id="orderDetails" rows="3" placeholder="Masukkan rincian pesanan"></textarea>

        <label for="total">Total Pembayaran:</label>
        <input type="text" id="total" placeholder="Masukkan total pembayaran">

        <button onclick="sendMessage()">Send to WhatsApp</button>
    </div>

    <script>

        // waktu antar
            const timeButton = document.getElementById("time-button");
            const timeDropdown = document.getElementById("time-dropdown");
            const selectedTimeDisplay = document.getElementById("selected-time");

            // generate
            const times = Array.from({ length: 13 }, (_, index) => {
                const hour = 7 + index; // dari 7 nyampe 19
                return `${hour.toString().padStart(2, "0")}:00`;
            });

            // dropdown menu
            times.forEach((time) => {
                const timeOption = document.createElement("div");
                timeOption.textContent = time;
                timeOption.style.padding = "12px";
                timeOption.style.cursor = "pointer";
                timeOption.style.color = "#4a4a4a";

                // Add hover effect 
                timeOption.addEventListener("mouseover", () => {
                    timeOption.style.backgroundColor = "#e5e7eb";
                });
                timeOption.addEventListener("mouseout", () => {
                    timeOption.style.backgroundColor = "transparent";
                });

                // Handle click event
                timeOption.addEventListener("click", () => {
                    timeButton.textContent = time; // munculin tombol
                    timeDropdown.style.display = "none"; // sembunyiin dropdown
                });

                timeDropdown.appendChild(timeOption);
            });

            // Toggle dropdown yerlihat
            timeButton.addEventListener("click", (event) => {
                event.stopPropagation();
                timeDropdown.style.display = timeDropdown.style.display === "none" || !timeDropdown.style.display ? "block" : "none";
            });

            // tutup dropdown
            document.addEventListener("click", (event) => {
                if (!timeDropdown.contains(event.target)) {
                    timeDropdown.style.display = "none"; // sembunyiin dropdown
                }
            });

        




        function sendMessage() {
            const address = document.getElementById('id-alamat-lengkap-input').innerText;
            const day = document.getElementById('id-hari-antar-input').value;
            const time = document.getElementById('selected-time').textContent;
            const notes = document.getElementById('id-catatan-input').value;
            const orderDetails = document.getElementById('orderDetails').value;
            const total = document.getElementById('total-payment').value;

            const phoneNumber = '089653531029';
            const message = `Halo, saya ingin memesan dengan rincian berikut:\n\n` +
                `Alamat: ${address}\n` +
                `Hari: ${day}\n` +
                `Jam: ${time}\n` +
                `Catatan Tambahan: ${notes}\n` +
                `Rincian Pesanan: ${orderDetails}\n` +
                `Total Pembayaran: ${total}`;

            const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }



        // alamat
            function loadAlamatToCheckout() {
                const savedData = JSON.parse(localStorage.getItem('formData'));

                if (savedData) {
                    // Menampilkan alamat di elemen yang diinginkan
                    const alamatElement = document.getElementById('id-alamat-lengkap-input');
                    alamatElement.innerText = `${savedData.nama}, ${savedData.kelurahan}, ${savedData.alamat}`;
                }
            }



         

            // Jalankan fungsi saat halaman dimuat
            window.addEventListener('load', loadAlamatToCheckout);
    </script>
</body>

</html>